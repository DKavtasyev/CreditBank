# MS Dossier
### Основные функции:
1. Приём асинхронных сообщений от модуля Deal при происшествии ключевых событий в процессе оформления кредита.
2. Уведомления пользователей по электронной почте о ключевых событиях.

### Ключевые события при оформлении кредита
#### 1. Предварительное одобрение заявки
> Kafka topic: finish-registration

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо о предварительном
одобрении заявки на кредит и ссылкой на завершение оформления кредита.

![1](https://github.com/user-attachments/assets/a998e136-17a6-4db5-8905-844c207f13bb)

#### 2. Одобрение кредита
> Kafka topic: create-documents

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо об одобрении
заявки и предложении сформировать кредитные документы. В письме имеется ссылка для запроса формирования документов.

![2](https://github.com/user-attachments/assets/53c2d218-804c-4257-a4e0-c24b08c8a1ec)

#### 3. Создание документов
> Kafka topic: send-documents

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо с документом и
предложением клиенту ознакомиться с условиями договора и дать своё согласие. Для отправки согласия в письме имеется
соответствующая ссылка

![3](https://github.com/user-attachments/assets/cb33f3a7-8c78-4935-9294-2ec018031e01)

#### 4. Подписание документов
> Kafka topic: send-ses

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо с предложением подписать
документы с использованием электронной подписи. В письме имеется ссылка для отправки запроса на подписание документа. В
адресе запроса содержится параметр запроса "code" с кодом подписи.

![4](https://github.com/user-attachments/assets/9034f221-6c40-4a4c-9d76-1ffd72b41f77)

#### 5. Кредит оформлен
> Kafka topic: credit-issued

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо уведомлением о
выпущенном кредите.

![5](https://github.com/user-attachments/assets/8052bd7e-9bad-48a7-8e20-dc7d6854ed8f)

#### 6. Отказ в получении кредита
> Kafka topic: statement-denied
![6](https://github.com/user-attachments/assets/34d184ff-9514-4532-b210-a6a8ed44d122)

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо с уведомлением об отказе
в кредите.

#### 7. Отказ клиента от кредита
> Kafka topic: client-rejection
![7](https://github.com/user-attachments/assets/eab21c77-647c-4655-b7c9-c9c80fe2bae5)

При получении сообщения на данный топик модуль Dossier отсылает пользователю электронное письмо с уведомлением об отказе
пользователя от кредита.
